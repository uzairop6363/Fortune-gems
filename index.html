<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Fortune Gems</title>
    <style>
        /* --- 1. CSS STYLING (Design) --- */
        body {
            margin: 0;
            padding: 0;
            background-color: #050505; /* Fallback dark color */
            color: white;
            font-family: Arial, sans-serif;
            height: 100vh;
            width: 100vw;
            overflow: hidden; /* Scroll band */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Game ka main dabba */
        .game-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            max-width: 480px; /* Mobile width limit */
            background-image: url('assets/bg_table.jpg'); /* Background Image */
            background-size: cover; 
            background-position: center;
            display: flex;
            flex-direction: column;
            justify-content: space-between; /* Header upar, Controls neeche */
            box-shadow: 0 0 20px rgba(0,0,0,0.8);
        }

        /* --- HEADER SECTION --- */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            z-index: 10;
        }

        .home-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            transition: transform 0.1s;
        }
        .home-btn:active { transform: scale(0.9); }
        .home-btn img { width: 100%; height: 100%; }
        
        .balance-box {
            background: linear-gradient(90deg, #1a1a1a, #333);
            border: 2px solid #d4af37; /* Gold border */
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 16px;
            min-width: 120px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.5);
            text-shadow: 1px 1px 0 #000;
        }

        /* --- REELS SECTION (Beech wala hissa) --- */
        .reels-section {
            flex-grow: 1; /* Baki jagah gher lega */
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        /* Golden Frame jo reels ke ird gird hai */
        .reels-frame {
            display: flex;
            gap: 8px; /* Columns ke beech gap */
            background: rgba(0, 0, 0, 0.4); /* Frame ke peeche halka kala */
            padding: 12px;
            border: 3px solid #ffd700;
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.2), inset 0 0 20px rgba(0,0,0,0.8);
        }

        /* Individual Reel Column */
        .reel {
            width: 90px;  /* BOX SIZE FIXED */
            height: 270px; /* 3 Boxes ki height (90 x 3 = 270) */
            overflow: hidden;
            position: relative;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 4px;
        }

        /* Moving Strip */
        .reel-strip {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            display: flex;
            flex-direction: column;
            /* Animation ke liye shuru mein upar rakhenge */
            transform: translateY(-900px); 
        }

        /* --- SYMBOL BOX DESIGN (Fixes apply kiye hain) --- */
        .symbol {
            width: 90px;
            height: 90px; /* Height fix ki taake calculation easy ho */
            display: flex;
            justify-content: center;
            align-items: center;
            
            /* Box Styling - Ab blank nahi lagega */
            background: radial-gradient(circle, rgba(60,40,10,0.8) 0%, rgba(20,10,0,0.9) 100%);
            border: 1px solid rgba(255, 215, 0, 0.3);
            box-sizing: border-box; /* Border ko size mein shamil karta hai */
            border-radius: 6px;
            margin-bottom: 0px; /* Strip continuous rahe */
        }

        /* Image Styling */
        .symbol img {
            width: 95%; /* Image ab box ka 95% hissa legi (Badi dikhegi) */
            height: 95%;
            object-fit: contain;
            filter: drop-shadow(0 0 5px rgba(255,215,0,0.4));
        }

        /* --- CONTROLS SECTION (Neeche wale buttons) --- */
        .controls-area {
            height: 140px;
            background: linear-gradient(to top, rgba(0,0,0,0.95), transparent);
            display: flex;
            justify-content: space-evenly;
            align-items: center;
            padding-bottom: 20px;
            z-index: 20;
        }

        .btn {
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: transform 0.1s;
            position: relative;
        }
        .btn:active { transform: scale(0.92); }

        /* Button Images sizing */
        .btn-small img { width: 60px; height: 60px; }
        .btn-large img { 
            width: 110px; 
            height: 110px; 
            filter: drop-shadow(0 0 10px rgba(255,215,0,0.3));
        }

        /* Button Text (Optional) */
        .btn-label {
            color: #ffd700;
            font-size: 10px;
            margin-top: 5px;
            text-transform: uppercase;
            font-weight: bold;
            letter-spacing: 1px;
            text-shadow: 0 1px 2px black;
        }

        /* Turbo Toggle Active State */
        .turbo-active img {
            filter: brightness(1.3) drop-shadow(0 0 5px #00ffff);
        }

        /* Spin Animation Blur */
        .blur {
            filter: blur(4px);
            transition: filter 0.1s;
        }

    </style>
</head>
<body>

    <div class="game-wrapper">
        
        <div class="header">
            <div class="home-btn">
                <img src="assets/btn_home.png" alt="Home">
            </div>
            <div class="balance-box">
                PKR <span id="balance">5,000</span>
            </div>
        </div>

        <div class="reels-section">
            <div class="reels-frame">
                <div class="reel">
                    <div class="reel-strip" id="reel1"></div>
                </div>
                <div class="reel">
                    <div class="reel-strip" id="reel2"></div>
                </div>
                <div class="reel">
                    <div class="reel-strip" id="reel3"></div>
                </div>
            </div>
        </div>

        <div class="controls-area">
            <div class="btn btn-small" id="turboBtn" onclick="toggleTurbo()">
                <img src="assets/btn_turbo.png" alt="Turbo">
                <span class="btn-label">Turbo</span>
            </div>

            <div class="btn btn-large" onclick="spin()">
                <img src="assets/btn_spin.png" alt="Spin">
            </div>

            <div class="btn btn-small">
                <img src="assets/btn_auto.png" alt="Auto">
                <span class="btn-label">Auto</span>
            </div>
        </div>

    </div>

    <script>
        // --- 2. JAVASCRIPT LOGIC ---

        // Config
        const SYMBOL_HEIGHT = 90; // Pixel height of one symbol box (Must match CSS)
        const TOTAL_SYMBOLS = 30; // Strip length

        // Image Paths (Ensure these match your assets folder)
        const symbols = [
            'assets/sym_gem_red.png',
            'assets/sym_gem_blue.png',
            'assets/sym_gem_green.png',
            'assets/sym_wild.png',
            'assets/sym_letter_a.png',
            'assets/sym_letter_k.png'
        ];

        let isTurbo = false;
        let isSpinning = false;
        
        const reelStrips = [
            document.getElementById('reel1'),
            document.getElementById('reel2'),
            document.getElementById('reel3')
        ];

        // 1. Initialize Reels (Fill with random symbols)
        function initReels() {
            reelStrips.forEach(strip => {
                let html = '';
                for(let i=0; i < TOTAL_SYMBOLS; i++) { 
                    const randomSym = symbols[Math.floor(Math.random() * symbols.length)];
                    html += `<div class="symbol"><img src="${randomSym}" alt="sym"></div>`;
                }
                strip.innerHTML = html;
                
                // Set Initial Position (Center aligned)
                // -900px ka matlab hai strip thodi upar set hogi taake beech wale symbols dikhen
                strip.style.transform = `translateY(-${10 * SYMBOL_HEIGHT}px)`; 
            });
        }

        // 2. Spin Logic
        function spin() {
            if (isSpinning) return;
            isSpinning = true;
            
            // Speed Settings
            const duration = isTurbo ? 0.5 : 2.5; // Seconds

            reelStrips.forEach((strip, index) => {
                // Add Blur for motion effect
                strip.parentElement.classList.add('blur');
                
                // Cascade Delay (Reels ek ke baad ek rukengi)
                const delay = index * (isTurbo ? 0.1 : 0.3);

                // CSS Transition Enable
                strip.style.transition = `transform ${duration}s cubic-bezier(0.5, 0, 0.2, 1)`;
                
                setTimeout(() => {
                    // Logic: Hum random position calculate karenge
                    // Hum chahte hain strip hamesha 90px ke multiple par rukay (taake symbol aadha na kate)
                    // Min index 10, Max index 25 ke beech kahin rukega
                    const randomStopIndex = Math.floor(Math.random() * 10) + 15; 
                    const targetPosition = -(randomStopIndex * SYMBOL_HEIGHT);

                    strip.style.transform = `translateY(${targetPosition}px)`;

                }, delay * 1000);
            });

            // Spin Khatam hone par kya hoga
            const totalTime = (duration * 1000) + (isTurbo ? 300 : 1000);
            
            setTimeout(() => {
                reelStrips.forEach(strip => {
                    strip.parentElement.classList.remove('blur');
                    strip.style.transition = 'none'; // Reset for next spin
                });
                isSpinning = false;
                console.log("Spin Complete!");
            }, totalTime);
        }

        // 3. Toggle Turbo Mode
        function toggleTurbo() {
            isTurbo = !isTurbo;
            const btn = document.getElementById('turboBtn');
            if(isTurbo) {
                btn.classList.add('turbo-active');
            } else {
                btn.classList.remove('turbo-active');
            }
        }

        // Start Game
        initReels();

    </script>
</body>
</html>
